<div class="container">
  <h3>Enrollment and Demographics Data</h3>

  <div class="buttons">
    <!-- Dropdown for selecting filter -->
    <p-dropdown
      [options]="filters"
      [(ngModel)]="selectedFilter"
      optionLabel="name"
      placeholder="Select a Filter"
      (onChange)="onFilterChange()">
    </p-dropdown>

    <!-- Show text input when filter is non-numeric -->
    <input
      pInputText
      type="text"
      [(ngModel)]="searchValue"
      (input)="applyFilter()"
      placeholder="Enter search text..."
      style="margin-bottom: 1rem;"
      *ngIf="!isNumericFilter(selectedFilter?.name)"
    />

    <!-- Show slider when filter is numeric -->
    <!-- Use literal attribute for range instead of binding -->
    <p-slider
      *ngIf="isNumericFilter(selectedFilter?.name)"
      [(ngModel)]="sliderValue"
      range="true"
      [min]="sliderMin"
      [max]="sliderMax"
      (onChange)="applyFilter()"
      [style.width.px]="300"
    ></p-slider>

    <p-button (click)="showPieChart()">Show Pie Chart</p-button>
    <p-button (click)="downloadCSV()">Download CSV</p-button>
  </div>

  <div class="table-wrapper">
    <table id="dataTable" border="1">
      <thead>
        <tr>
          <th>City</th>
          <th>State</th>
          <th>Zip Code</th>
          <th>Term</th>
          <th>Population</th>
          <th>Income</th>
          <th>Bachelor Degree</th>
          <th>Median Age</th>
          <th>Annotation</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
</div>
